#:import Factory kivy.factory.Factory

<MyPopup@Popup>
    auto_dismiss:True# Click anywhere to dismiss popup 
    size_hint: (.4,.6)
    #pos_hint: {'x': 0.2, 'top':0.9}
    title: " Enter Your PIN"

    BoxLayout:
        orientation: "vertical"
        #size_hint: (.4, .6)
        #size: root.width, root.height # make it fit whole window widget
        padding: 10
        spacing: 10


        TextInput:
            id: calc_input
            text: "Enter Pin"
            background_normal: ''
            background_color: 0.7,.71,0.7,1
            halign: "center" #align to the right hand side
            multiline: False
            font_size: 45
            size_hint: (1, .15) # Dynamic sizing with fit whole width




        GridLayout:
            cols: 3
            rows: 4
            size_hint: (1,.5)


            # row 2
            Button:
                text: "7"
                on_press: app.root.button_press(7)

            Button:
                text: "8"
                on_press: app.root.button_press(8)

            Button:
                text: "9"
                on_press: app.root.button_press(9)


            # row 3
            Button:
                text: "4"
                on_press: app.root.button_press(4)

            Button:
                text: "5"
                on_press: app.root.button_press(5)

            Button:
                text: "6"
                on_press: app.root.button_press(6)


            # row 4
            Button:
                text: "1"
                on_press: app.root.button_press(1)

            Button:
                text: "2"
                on_press: app.root.button_press(2)

            Button:
                text: "3"
                on_press: app.root.button_press(3)


            # row 5
            Button:

                id: backspace_button
                #setting the button to the size of button image
                size_hint: .15,.2
                #setting button position to center of screen
                background_normal: ''
                background_color: 0.7,.71,0.7,1
                pos_hint: {'center_x': 0.5}
                on_press: app.root.backspace()
                on_release: app.root.hello_off()

                Image:
                    id: my_image
                    source: 'icons/backspace_down.png'
                    # Setting the image to be at center of button
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y


            Button:
                text: "0"
                on_press: app.root.button_press(0)


            Button:
                id: submit
                text: "OK"
                font_size: 44
                color: 0,0,0,1
                background_normal: ""
                background_color: 0.7,.71,0.7,1
                on_press: app.root.equals()
                #on_release: root.dismiss()
                on_release: app.root.ok_off()





<MyLayout>
    BoxLayout:
        orientation: 'vertical'
        size: root.width, root.height
        Label:
            text: "Popup Stuff"
            font_size: 32

        Button:
            text: "Popup"
            font_size: 32
            on_release: root.open_popup() #Factory.MyPopup().open()

